{"ast":null,"code":"import { shuffleArray, removeItemOnce, randomOneOrMinusOne, XOR, shuffleSegment } from \"./PythonFunctions\";\nfunction getMeanTAHours(dic) {\n  // Filter out the values that are \"0\"\n  const nonZeroValues = Object.values(dic).filter(value => Number(value) !== 0);\n\n  // Parse the non-zero values into numbers\n  const nonZeroNumbers = nonZeroValues.map(value => Number(value));\n  const mean = nonZeroNumbers.reduce((acc, val) => acc + val, 0) / nonZeroNumbers.length;\n  return mean;\n}\nfunction createCourseHierarchy(c) {\n  // orders course list by 1900 Labs first then inclass only then by total enrolled\n  c.sort((a, b) => {\n    if (a.course_number === '1900' && b.age === '1900') {\n      return b.totalEnrolled - a.totalEnrolled; // sort by name in ascending order\n    } else if (a.course_number === '1900') {\n      return -1; // a comes before b\n    } else if (b.age === '1900') {\n      return 1; // b comes before a\n    } else if (a.inClassNeeded === \"Y\\r\" && b.age === '1900') {\n      return b.totalEnrolled - a.totalEnrolled;\n    } else if (a.inClassNeeded === \"Y\\r\") {\n      return -1;\n    } else if (b.inClassNeeded === \"Y\\r\") {\n      return 1;\n    } else {\n      return b.totalEnrolled - a.totalEnrolled; // sort by age in ascending order\n    }\n  });\n}\n\nfunction sortTAsByHours(t) {\n  t.sort((a, b) => {\n    return b.taHours - a.taHours;\n  });\n}\nfunction createTAHierarchy(c, course, tas, t) {\n  // orders preferred list of TAs if ta in able_ta list ranked ahead of others\n  // Otherwise orders based on Even or odd in order to assign 15 hours to 15 hours or 5 to 5 or 20 to 20 and finally from highest to least\n  tas.sort((a, b) => {\n    if (c.find(item => item.CRN === course).teacher_assistants.some(item => item.able_map === a) && c.find(item => item.CRN === course).teacher_assistants.some(item => item.able_map === b)) {\n      // return t.find(item => item.uuid === b).taHours - t.find(item => item.uuid === a).taHours\n      const a_hours_even = t.find(item => item.uuid === a).taHours % 2 == 0;\n      const b_hours_even = t.find(item => item.uuid === b).taHours % 2 == 0;\n      const check_even = c.find(item => item.CRN === course).taHours % 2 == 0;\n      if (!XOR(a_hours_even, check_even) && !XOR(b_hours_even, check_even)) {\n        return t.find(item => item.uuid === b).taHours - t.find(item => item.uuid === a).taHours;\n      } else if (!XOR(a_hours_even, check_even)) {\n        return -1;\n      } else if (!XOR(b_hours_even, check_even)) {\n        return 1;\n      }\n      return t.find(item => item.uuid === b).taHours - t.find(item => item.uuid === a).taHours;\n    } else if (c.find(item => item.CRN === course).teacher_assistants.some(item => item.able_map === a)) {\n      return -1;\n    } else if (c.find(item => item.CRN === course).teacher_assistants.some(item => item.able_map === b)) {\n      return 1;\n    } else {\n      const a_hours_even = t.find(item => item.uuid === a).taHours % 2 == 0;\n      const b_hours_even = t.find(item => item.uuid === b).taHours % 2 == 0;\n      const check_even = c.find(item => item.CRN === course).taHours % 2 == 0;\n      if (!XOR(a_hours_even, check_even) && !XOR(b_hours_even, check_even)) {\n        return t.find(item => item.uuid === b).taHours - t.find(item => item.uuid === a).taHours;\n      } else if (!XOR(a_hours_even, check_even)) {\n        return -1;\n      } else if (!XOR(b_hours_even, check_even)) {\n        return 1;\n      }\n      return t.find(item => item.uuid === b).taHours - t.find(item => item.uuid === a).taHours;\n    }\n  });\n  return tas;\n}\nfunction createCourseHierarchyForTA(ta, c, courses) {\n  courses.sort((a, b) => {\n    if (c.find(item => item.CRN === a).teacher_assistants.some(item => item.able_map === ta) && c.find(item => item.CRN === b).teacher_assistants.some(item => item.able_map === ta)) {\n      // if both in ta list, randomize\n      return randomOneOrMinusOne();\n    } else if (c.find(item => item.CRN === a).teacher_assistants.some(item => item.able_map === ta)) {\n      return -1;\n    } else if (c.find(item => item.CRN === b).teacher_assistants.some(item => item.able_map === ta)) {\n      return 1;\n    }\n  });\n  return courses;\n}\nexport { createCourseHierarchy, createCourseHierarchyForTA, createTAHierarchy, sortTAsByHours, getMeanTAHours };","map":{"version":3,"names":["shuffleArray","removeItemOnce","randomOneOrMinusOne","XOR","shuffleSegment","getMeanTAHours","dic","nonZeroValues","Object","values","filter","value","Number","nonZeroNumbers","map","mean","reduce","acc","val","length","createCourseHierarchy","c","sort","a","b","course_number","age","totalEnrolled","inClassNeeded","sortTAsByHours","t","taHours","createTAHierarchy","course","tas","find","item","CRN","teacher_assistants","some","able_map","a_hours_even","uuid","b_hours_even","check_even","createCourseHierarchyForTA","ta","courses"],"sources":["/home/terry/ta_capstone/src/components/utils/PreprocessingFunctions.js"],"sourcesContent":["import { shuffleArray, removeItemOnce, randomOneOrMinusOne, XOR, shuffleSegment} from \"./PythonFunctions\";\r\n\r\n\r\nfunction getMeanTAHours(dic) {\r\n\r\n\t// Filter out the values that are \"0\"\r\n\tconst nonZeroValues = Object.values(dic).filter(value => Number(value) !== 0);\r\n\r\n\t// Parse the non-zero values into numbers\r\n\tconst nonZeroNumbers = nonZeroValues.map(value => Number(value));\r\n\tconst mean = nonZeroNumbers.reduce((acc, val) => acc + val, 0) / nonZeroNumbers.length;\r\n\r\n\treturn mean\r\n}\r\n\r\nfunction createCourseHierarchy(c){\r\n\t// orders course list by 1900 Labs first then inclass only then by total enrolled\r\n\tc.sort((a, b) => {\r\n\t\tif (a.course_number === '1900' && b.age === '1900') {\r\n\t\t\treturn b.totalEnrolled - a.totalEnrolled // sort by name in ascending order\r\n\t\t} else if (a.course_number === '1900') {\r\n\t\t\treturn -1; // a comes before b\r\n\t\t} else if ( b.age === '1900') {\r\n\t\t\treturn 1; // b comes before a\r\n\t\t} else if (a.inClassNeeded === \"Y\\r\" && b.age === '1900') {\r\n\t\t\treturn b.totalEnrolled - a.totalEnrolled \r\n\t\t} else if (a.inClassNeeded === \"Y\\r\") {\r\n\t\t\treturn -1;\r\n\t\t} else if (b.inClassNeeded === \"Y\\r\") {\r\n\t\t\treturn 1;\r\n\t\t} else {\r\n\t\t  return b.totalEnrolled - a.totalEnrolled; // sort by age in ascending order\r\n\t\t}\r\n\t  });\t \r\n}\r\n\r\nfunction sortTAsByHours(t) {\r\n\tt.sort((a, b) => {\r\n\t\treturn b.taHours - a.taHours\r\n\t})\r\n}\r\n\r\nfunction createTAHierarchy(c, course, tas, t){\r\n\t// orders preferred list of TAs if ta in able_ta list ranked ahead of others\r\n\t// Otherwise orders based on Even or odd in order to assign 15 hours to 15 hours or 5 to 5 or 20 to 20 and finally from highest to least\r\n\ttas.sort((a, b) => {\r\n\t\tif (c.find(item => item.CRN === course).teacher_assistants.some(item => item.able_map === a) && c.find(item => item.CRN === course).teacher_assistants.some(item => item.able_map === b)){\r\n\t\t\t// return t.find(item => item.uuid === b).taHours - t.find(item => item.uuid === a).taHours\r\n\t\t\tconst a_hours_even = t.find(item => item.uuid === a).taHours % 2 == 0\r\n\t\t\tconst b_hours_even = t.find(item => item.uuid === b).taHours % 2 == 0\r\n\t\t\tconst check_even = c.find(item => item.CRN === course).taHours % 2 == 0\r\n\t\t\tif (!XOR(a_hours_even, check_even) && !XOR(b_hours_even, check_even)){\r\n\t\t\t\treturn t.find(item => item.uuid === b).taHours - t.find(item => item.uuid === a).taHours;\r\n\t\t\t} else if(!XOR(a_hours_even, check_even)){\r\n\t\t\t\treturn -1;\r\n\t\t\t} else if (!XOR(b_hours_even, check_even)){\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn t.find(item => item.uuid === b).taHours - t.find(item => item.uuid === a).taHours;\r\n\t\t} else if (c.find(item => item.CRN === course).teacher_assistants.some(item => item.able_map === a)){\r\n\t\t\treturn -1;\r\n\t\t} else if (c.find(item => item.CRN === course).teacher_assistants.some(item => item.able_map === b)){\r\n\t\t\treturn 1;\r\n\t\t} else {\r\n\t\t\tconst a_hours_even = t.find(item => item.uuid === a).taHours % 2 == 0\r\n\t\t\tconst b_hours_even = t.find(item => item.uuid === b).taHours % 2 == 0\r\n\t\t\tconst check_even = c.find(item => item.CRN === course).taHours % 2 == 0\r\n\t\t\tif (!XOR(a_hours_even, check_even) && !XOR(b_hours_even, check_even)){\r\n\t\t\t\treturn t.find(item => item.uuid === b).taHours - t.find(item => item.uuid === a).taHours;\r\n\t\t\t} else if(!XOR(a_hours_even, check_even)){\r\n\t\t\t\treturn -1;\r\n\t\t\t} else if (!XOR(b_hours_even, check_even)){\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn t.find(item => item.uuid === b).taHours - t.find(item => item.uuid === a).taHours;\r\n\t\t}\r\n\t})\r\n\treturn tas;\r\n}\r\n\r\nfunction createCourseHierarchyForTA(ta, c, courses){\r\n\r\n\tcourses.sort((a, b) => {\r\n\t\tif (c.find(item => item.CRN === a).teacher_assistants.some(item => item.able_map === ta) && c.find(item => item.CRN === b).teacher_assistants.some(item => item.able_map === ta)){\r\n\t\t\t// if both in ta list, randomize\r\n\t\t\treturn randomOneOrMinusOne();\r\n\t\t} else if (c.find(item => item.CRN === a).teacher_assistants.some(item => item.able_map === ta)){\r\n\t\t\treturn -1;\r\n\t\t} else if (c.find(item => item.CRN === b).teacher_assistants.some(item => item.able_map === ta)){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t})\r\n\treturn courses\r\n}\r\n\r\n\r\nexport {createCourseHierarchy, createCourseHierarchyForTA, createTAHierarchy, sortTAsByHours, getMeanTAHours}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}